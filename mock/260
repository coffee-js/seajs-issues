{
  "url": "https://api.github.com/repos/seajs/seajs/issues/260",
  "labels_url": "https://api.github.com/repos/seajs/seajs/issues/260/labels{/name}",
  "comments_url": "https://api.github.com/repos/seajs/seajs/issues/260/comments",
  "events_url": "https://api.github.com/repos/seajs/seajs/issues/260/events",
  "html_url": "https://github.com/seajs/seajs/issues/260",
  "id": 5476331,
  "number": 260,
  "title": "模块的加载启动",
  "user": {
    "login": "lifesinger",
    "id": 97227,
    "avatar_url": "https://2.gravatar.com/avatar/db33090541526c03c798f82aa0a5dbaa?d=https%3A%2F%2Fidenticons.github.com%2Fc29e2f0d02014ac5e5d125370865fc0d.png",
    "gravatar_id": "db33090541526c03c798f82aa0a5dbaa",
    "url": "https://api.github.com/users/lifesinger",
    "html_url": "https://github.com/lifesinger",
    "followers_url": "https://api.github.com/users/lifesinger/followers",
    "following_url": "https://api.github.com/users/lifesinger/following{/other_user}",
    "gists_url": "https://api.github.com/users/lifesinger/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lifesinger/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lifesinger/subscriptions",
    "organizations_url": "https://api.github.com/users/lifesinger/orgs",
    "repos_url": "https://api.github.com/users/lifesinger/repos",
    "events_url": "https://api.github.com/users/lifesinger/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lifesinger/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "url": "https://api.github.com/repos/seajs/seajs/labels/documentation",
      "name": "documentation",
      "color": "444444"
    }
  ],
  "state": "closed",
  "assignee": null,
  "milestone": {
    "url": "https://api.github.com/repos/seajs/seajs/milestones/12",
    "labels_url": "https://api.github.com/repos/seajs/seajs/milestones/12/labels",
    "id": 368419,
    "number": 12,
    "title": "2.1.1",
    "description": "",
    "creator": {
      "login": "lifesinger",
      "id": 97227,
      "avatar_url": "https://2.gravatar.com/avatar/db33090541526c03c798f82aa0a5dbaa?d=https%3A%2F%2Fidenticons.github.com%2Fc29e2f0d02014ac5e5d125370865fc0d.png",
      "gravatar_id": "db33090541526c03c798f82aa0a5dbaa",
      "url": "https://api.github.com/users/lifesinger",
      "html_url": "https://github.com/lifesinger",
      "followers_url": "https://api.github.com/users/lifesinger/followers",
      "following_url": "https://api.github.com/users/lifesinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/lifesinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lifesinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lifesinger/subscriptions",
      "organizations_url": "https://api.github.com/users/lifesinger/orgs",
      "repos_url": "https://api.github.com/users/lifesinger/repos",
      "events_url": "https://api.github.com/users/lifesinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lifesinger/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 10,
    "state": "closed",
    "created_at": "2013-07-01T23:14:04Z",
    "updated_at": "2013-07-19T00:59:34Z",
    "due_on": "2013-07-31T07:00:00Z"
  },
  "comments": 18,
  "created_at": "2012-07-06T23:59:11Z",
  "updated_at": "2013-10-14T08:37:37Z",
  "closed_at": "2012-09-25T07:16:00Z",
  "pull_request": {
    "html_url": null,
    "diff_url": null,
    "patch_url": null
  },
  "body": "# 模块的加载启动\r\n\r\nSea.js 是一个模块加载器，模块加载器需要实现两个基本功能：\r\n\r\n1. 实现模块定义规范，这是模块系统的基础。\r\n2. 模块系统的启动与运行。\r\n\r\n\r\n### 模块定义规范的实现\r\n\r\n这就是 `define`，`require`，`exports`，`module` 的实现。具体实现细节，有兴趣的可以看 Sea.js 的源码：[seajs/src](https://github.com/seajs/seajs/tree/master/src)。可以按照 [Gruntfile.js](https://github.com/seajs/seatools/blob/master/Gruntfile.js#L98) 中声明的合并顺序阅读，核心是 `module.js` 文件。\r\n\r\n`define` 等方法的具体使用，请阅读：[CMD 模块定义规范](https://github.com/seajs/seajs/issues/242)\r\n\r\n\r\n### 模块系统的启动\r\n\r\n有了 `define` 等模块定义规范的实现，我们可以开发出很多模块。但光有一堆模块不管用，我们还得让它们能跑起来。\r\n\r\n首先就是启动问题。比如在 Node 中，启动很简单：\r\n\r\n```\r\n$ node main.js\r\n```\r\n\r\n这就是启动。\r\n\r\n再举一个例子，操作系统的启动：大家都知道的，按一下开机键就好。\r\n\r\n在 Sea.js 里，要启动模块系统很简单：\r\n\r\n```html\r\n<script src=\"path/to/sea.js\"></script>\r\n<script>\r\n  seajs.use('./main');\r\n</script>\r\n```\r\n\r\n\r\n## seajs.use `Function`\r\n\r\n用来在页面中加载模块。\r\n\r\n\r\n### seajs.use `seajs.use(id, callback?)`\r\n\r\n通过 `use` 方法，可以在页面中加载任意模块：\r\n\r\n```js\r\n// 加载模块 main，并在加载完成时，执行指定回调\r\nseajs.use('./main', function(main) {\r\n  main.init();\r\n});\r\n```\r\n\r\n`use` 方法还可以一次加载多个模块：\r\n\r\n```js\r\n// // 并发加载模块 a 和模块 b，并在都加载完成时，执行指定回调\r\nseajs.use(['./a', './b'], function(a, b) {\r\n  a.init();\r\n  b.init();\r\n});\r\n```\r\n\r\n`callback` 参数可选，省略时，表示无需回调。\r\n\r\n\r\n### 与 DOM ready 的关系\r\n\r\n**注意**：`seajs.use` 与 `DOM ready` 事件没有任何关系。如果某些操作要确保在 `DOM ready` 后执行，需要使用 `jquery` 等类库来保证，比如：\r\n\r\n```js\r\nseajs.use(['jquery', './main'], function($, main) {\r\n  $(document).ready(function() {\r\n    main.init();\r\n  });\r\n});\r\n```\r\n\r\n\r\n\r\n## sea.js 的引入\r\n\r\n在调用 `seajs.use` 之前，需要先引入 `sea.js` 文件，推荐直接使用 `script` 标签同步引入：\r\n\r\n```html\r\n<script src=\"path/to/sea.js\"></script>\r\n```\r\n\r\n为了满足某些场景下的性能优化需求，也可以将 `sea.js` 的源码内嵌：\r\n\r\n```html\r\n<script>\r\n// sea.js 的源码\r\n</script>\r\n```\r\n\r\n注意：代码内嵌时，需要通过 `seajs.config` 手动配置 `base` 路径。\r\n\r\n\r\n\r\n\r\n## 最佳实践\r\n\r\n1. `seajs.use` 理论上只用于加载启动，不应该出现在 `define` 中的模块代码里。在模块代码里需要异步加载其他模块时，推荐使用 `require.async` 方法。\r\n\r\n1. 引入 `sea.js` 时，可以把 `sea.js` 与其他文件打包在一起，可提前合并好，或利用 combo 服务动态合并。无论哪一种方式，为了让 `sea.js` 内部能快速获取到自身路径，推荐手动加上 `id` 属性：\r\n```html\r\n<script src=\"path/to/sea.js\" id=\"seajsnode\"></script>\r\n```\r\n \r\n 加上 `seajsnode` 值，可以让 `sea.js` 直接获取到自身路径，而不需要通过其他机制去自动获取。这对性能和稳定性会有一定提升，推荐默认都加上。\r\n\r\n\r\n\r\n## 小结\r\n\r\n`seajs.use` 是模块加载器必备的一个接口。在 `seajs` 上，还有用于配置的 `config` 方法、方便调试的 `cache` 等接口，这些会在接下来的文档中详细阐述。\r\n\r\n",
  "closed_by": {
    "login": "lifesinger",
    "id": 97227,
    "avatar_url": "https://2.gravatar.com/avatar/db33090541526c03c798f82aa0a5dbaa?d=https%3A%2F%2Fidenticons.github.com%2Fc29e2f0d02014ac5e5d125370865fc0d.png",
    "gravatar_id": "db33090541526c03c798f82aa0a5dbaa",
    "url": "https://api.github.com/users/lifesinger",
    "html_url": "https://github.com/lifesinger",
    "followers_url": "https://api.github.com/users/lifesinger/followers",
    "following_url": "https://api.github.com/users/lifesinger/following{/other_user}",
    "gists_url": "https://api.github.com/users/lifesinger/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lifesinger/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lifesinger/subscriptions",
    "organizations_url": "https://api.github.com/users/lifesinger/orgs",
    "repos_url": "https://api.github.com/users/lifesinger/repos",
    "events_url": "https://api.github.com/users/lifesinger/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lifesinger/received_events",
    "type": "User",
    "site_admin": false
  }
}
